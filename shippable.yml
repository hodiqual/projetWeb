# language setting
language: php
# php tag
php:
  - 5.3
  - 5.4
  - 5.5
  - 5.6
  - hhvm
  
env:
    - secure: HQP9QVUekPyMddKgyjMVmA6jdXG8QnNkeOp6YIqpbeoxBg59G8qbcKysM6hkUWKG9VI+q/TKn1eW3Jls4j/n6IVrSnFHfhNtwnUXbBsLJZl7mLRiQCiRufxnTWEIucparYHqsJnlu4SGUSFoHwoiqWeXOKAN+24yDJUa81Q9ZRYTbLT/EZmiHS9penZJxLYjSXUrUSiJBNqAGxrt8B9mxISP+L2GQg2YQm+gZYKs0sw2PoHptvqUdoDU8/EptXBMP+HnwsCJdesK39HKg8b+xoJM20wmTahz+Sx45Yzwsx83M6Qb1zSXt3D2fFeewTNZIcA2MvNbELj4gRWU+y3JQQ==
global:
    - OPENSHIFT_REPO=ssh://559d9688e0b8cd1eaa000051@surf-iessa.rhcloud.com/~/git/surf.git


before_script: 
  - mkdir -p shippable/testresults
  - mkdir -p shippable/codecoverage
  - mysql -e 'create database if not exists test;'

script:
  - phpunit  --log-junit shippable/testresults/junit.xml --coverage-xml shippable/codecoverage test.php
  
before_install:
  - git remote -v | grep ^openshift || git remote add openshift $OPENSHIFT_REPO
  
after_success:
  - rhc apps --token 3a1b69d243d99014162155f17cf4be44ff921947da2b120000c9fbe0a42fb82d
  - git push -f openshift $BRANCH:master
